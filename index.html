<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كنيسة القديسين بطرس وبولس</title>
    
    <link rel="icon" href="123.icon">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="light-mode">
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <div class="custom-cursor"></div>

    <header class="top-bar" id="topBar">
        <div class="container">
            <div class="top-bar-content">
                <div class="site-branding">
                    <div class="site-name">كنيسة القديسين بطرس وبولس</div>

<div class="welcome-section">
    <div id="welcomeMessage" class="welcome-message" style="display: none;">
        ازيك يا <span id="userName"></span>
    </div>
    <button id="loginButton" class="register-button">تسجيل الدخول</button>
   
    <button id="loginButtonMobile" class="register-button mobile-login-btn" style="display: none;">تسجيل الدخول</button>
    <div class="social-media">

    </div>
</div>  


                </div>
                <button class="toggle-btn">☰</button>
                <div class="theme-switch-wrapper">
                    <input type="checkbox" id="theme-switch" class="theme-switch">
                    <label for="theme-switch" class="theme-switch-label">
                        <span class="icon icon-sun">☀</span>
                        <span class="icon icon-moon">☾</span>
                    </label>
                </div>
                
            </div>
            <nav class="desktop-nav">
                <a href="enjeel.html">الإنجيل المقدس</a>
                <a href="404.html">الأجبية</a>
                <a href="404.html">الخلاجي</a>
                <a href="404.html">القطمارس</a>
                <a href="courses/courses.html">الكورسات</a>
                <a href="admin.html">Controls</a>
            </nav>
        </div>
        
    </header>


    

    

    <div class="sidebar-overlay"></div>
    <nav class="sidebar" id="sidebar">
        <button class="sidebar-close-btn"></button>
        <div class="sidebar-social">
            <a href="https://web.facebook.com/groups/332492051629992/" target="_blank">
                <img src="7.png" alt="فيسبوك">
            </a>
            <a href="https://www.youtube.com/@PeterAndPoul/videos" target="_blank">
                <img src="8.png" alt="يوتيوب">
            </a>

            
        </div>
        <a href="enjeel.html" class="sidebar-link">الإنجيل المقدس</a>
        <a href="404.html" class="sidebar-link">الأجبية</a>
        <a href="404.html" class="sidebar-link">الخلاجي</a>
        <a href="404.html" class="sidebar-link">القطمارس</a>
        <a href="courses/courses.html" class="sidebar-link">الكورسات</a>
        <a href="admin.html" class="sidebar-link">Controls</a>



        



    </nav>

    <div class="main-image">
        <div class="overlay"></div>
    </div>

    <section class="about-section section-transiti" id="aboutSection" data-aos="fade-up">
        <div class="container">
            <h2 class="section-title">عن الكنيسة</h2>
            <div class="about-content" data-tilt data-tilt-max="8" data-tilt-speed="300" data-tilt-perspective="800">
                <img src="3.jpg" alt="صورة الكنيسة" class="church-image" loading="lazy">
                <div class="text">
                    <p>تعد كنيسة القديسين بطرس وبولس هي الكنيسة الثالثة بعد كنستي الشهيد مار جرجس والأخرى السيدة العذراء مريم التابعين لايبارشية كرسي المنوفية و كانت تتبع طائفة الأقباط الكاثوليك و في عام 2005 تم شراء الكنيسة و تدشينها بيد صاحب النيافة الحبر الجليل الأنبا بنيامين وتعرضت الكنيسة بحريق هائل يوم الأربعاء الموافق تسعة من شهر سبتمبر عام ألفين و تسعه 2009/09/9 الساعة الثالثة ظهرا كان هناك فى هذا اليوم قداس انتهى الساعة الحادية عشر صباحا قد زعم البعض انه ماس كهربى او شمعة هى التى سببت هذا الحريق الهائل الذى سبب خسائر فادحة و قدرت هذه الخسائر بمائة ألف جنيه قد أثبت أنه ليس ماس كهربى ولا يوجد ايضا اى شمعة يوم الاربعاء يوجد الشمع فقط يومي الأحد والجمعة فالحريق لم يتم بشمعة أو ماس كهربى و تم تجديد الكنيسة بالكامل والان يتم بناء كنيسة أخرى تابعة لهذه الكنيسة </p>
                </div>
            </div>
        </div>
    </section>
 
    <section id="mass-schedule" class="section-transiti" data-aos="fade-up" data-aos-delay="100">
        <div class="container">
            <h2 class="section-title">مواعيد القداسات</h2>
            <div class="table-responsive">
                <table class="mass-table">
                    <thead>
                        <tr>
                            <th>الأحد</th>
                            <th>الإثنين</th>
                            <th>الثلاثاء</th>
                            <th>الأربعاء</th>
                            <th>الخميس</th>
                            <th>الجمعة</th>
                            <th>السبت</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>7:00 ص</td>
                            <td>----</td>
                            <td>----</td>
                            <td>12:00 م</td>
                            <td>----</td>
                            <td>7:30 ص</td>
                            <td>7:30 ص</td>
                        </tr>
                        <tr>
                            <td>إلى</td>
                            <td>--</td>
                            <td>--</td>
                            <td>إلى</td>
                            <td>--</td>
                            <td>إلى</td>
                            <td>إلى</td>
                        </tr>
                        <tr>
                            <td>9:30 ص</td>
                            <td>----</td>
                            <td>----</td>
                            <td>3:00 م</td>
                            <td>----</td>
                            <td>10:00 ص</td>
                            <td>10:00 ص</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section id="church-news" class="church-news-section" data-aos="fade-up" data-aos-delay="200">
        <div class="container">
            <h2 class="section-title">أخبار الكنيسة</h2>
            <div class="news-slider">
                <div class="news">
                    <div class="news-card" data-tilt data-tilt-max="8" data-tilt-speed="300" data-tilt-perspective="800">
                        <div class="news-image">
                            <img src="10.jpg" alt="مهرجان الكرازة 2024" loading="lazy">
                        </div>
                        <div class="news-content">
                            <h3 class="news-title">مشاركة الكنيسة في مهرجان الكرازة 2024</h3>
                            <p class="news-excerpt">مشاركة الكنيسة في فرع المسرحية...</p>
                            <button class="read-more-btn" onclick="showModal('مشاركة الكنيسة في فرع المسرحية', 'إخراج عماد فاروق ونبيل عبد الساتر، تأليف نفين ظريف.')">اقرأ المزيد</button>
                        </div>
                    </div>
                    <div class="news-card" data-tilt data-tilt-max="8" data-tilt-speed="300" data-tilt-perspective="800">
                        <div class="news-image">
                            <img src="9.jpg" alt="مهرجان الكرازة 2024" loading="lazy">
                        </div>
                        <div class="news-content">
                            <h3 class="news-title">مشاركة الكنيسة في مهرجان الكرازة 2024</h3>
                            <p class="news-excerpt">مشاركة الكنيسة في فرع الكورال...</p>
                            <button class="read-more-btn" onclick="showModal('مشاركة الكنيسة في فرع الكورال', 'تحت إشراف مايكل عادل، تاسوني هبة زاهر، وتاسوني ليليان مجدي.')">اقرأ المزيد</button>
                        </div>
                    </div>
                </div>
                <button class="slide-btn prev-btn">❮</button>
                <button class="slide-btn next-btn">❯</button>
            </div>
        </div>
    </section>

    <section class="fathers-section section-transiti" id="fathersSection" data-aos="fade-up" data-aos-delay="300">
        <div class="container">
            <h2 class="section-title">آباء الكنيسة</h2>
            <div class="fathers-grid">
                <div class="father">
                    <a href="ابونا بولس.html">
                        <div class="father-image">
                            <img src="2.jpg" alt="القمص بولس حنا" loading="lazy">
                        </div>
                    </a>
                    <div class="name">القمص بولس حنا</div>
                </div>
                <div class="father">
                    <a href="ابونا بيتروس.html">
                        <div class="father-image">
                            <img src="4.jpg" alt="القس بيتروس داود" loading="lazy">
                        </div>
                    </a>
                    <div class="name">القس بيتروس داود</div>
                </div>
                <div class="father">
                    <a href="ابونا برناباس.html">
                        <div class="father-image">
                            <img src="5.jpg" alt="القس برناباس نادي" loading="lazy">
                        </div>
                    </a>
                    <div class="name">القس برناباس نادي</div>
                </div>
                <div class="father">
                    <a href="ابونا ياكوبوس.html">
                        <div class="father-image">
                            <img src="6.png" alt="القس ياكوبوس صبري" loading="lazy">
                        </div>
                    </a>
                    <div class="name">القس ياكوبوس صبري</div>
                </div>
            </div>
        </div>
    </section>

    <section class="donation-section section-transiti" id="donationSection" data-aos="fade-up" data-aos-delay="400">
        <div class="container">
            <h2 class="section-title">التبرع</h2>
            <p>الكنيسة تقبل تبرعاتكم وعطاياكم على الأرقام التالية: "وَالْمُعْطِي الْمَسْرُورَ يُحِبُّهُ اللهُ" (2 كو 9: 7)</p>
            
            <div class="contact-buttons">
                <button class="contact-button" onclick="location.href='رقم ابونا بولس.html'">القمص بولس حنا</button>
                <button class="contact-button" onclick="location.href='رقم ابونا بطرس.html'">القس بطرس داود</button>
                <button class="contact-button" onclick="location.href='رقم ابونا برناباس.html'">القس برناباس نادي</button>
                <button class="contact-button" onclick="location.href='رقم ابونا ياكوبوس.html'">القس ياكوبوس صبري</button>
            </div>
        </div>
    </section>

    <div id="newsModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h3 id="modalTitle"></h3>
            <p id="modalContent"></p>
        </div>
    </div>

    <footer>
        © جميع الحقوق محفوظة لكنيسة القديسين بطرس وبولس
        <br>
        <a href="https://menasamuel2010.github.io/MISA-Technolgy./" target="_blank">Designed by Mina Samuel</a>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Initialize AOS
            AOS.init({ duration: 1000, once: true });

// Initialize Vanilla Tilt for Desktop only
if (window.innerWidth >= 768) {
    VanillaTilt.init(document.querySelector('.about-content'), {
        max: 800,
        speed: 300000,
        perspective: 80000
    });
    
    VanillaTilt.init(document.querySelectorAll('.father'), {
        max: 8,
        speed: 30,
        perspective: 80
    });
    
    VanillaTilt.init(document.querySelectorAll('.news-card'), {
        max: 800,
        speed: 30000,
        perspective: 80000
    });
    
    VanillaTilt.init(document.querySelector('.table-responsive'), {
        max: 8,
        speed: 80,
    });
}   

// منع النقر بزر الماوس الأيمن
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

// منع نسخ النصوص
document.addEventListener('copy', function(e) {
    e.preventDefault();
    alert('نسخ النصوص غير مسموح به في هذا الموقع');
});

// منع اختيار النصوص (لكن هذا قد يؤثر على تجربة المستخدم)
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});

// لمنع سحب الصور (اختياري)
document.addEventListener('dragstart', function(e) {
    if (e.target.tagName === 'IMG') {
        e.preventDefault();
    }
});


            // Custom Cursor (Desktop Only)
            if (window.innerWidth >= 768) {
                const cursor = document.querySelector('.custom-cursor');
                document.addEventListener('mousemove', (e) => {
                    cursor.style.left = `${e.clientX}px`;
                    cursor.style.top = `${e.clientY}px`;
                });

                document.querySelectorAll('a, button, .father, .read-more-btn, .contact-button, .toggle-btn, .theme-switch-label, .sidebar-link, .social-media img').forEach(el => {
                    el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
                    el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
                });

                // Scroll Interaction for Cursor
                let lastScrollTop = 0;
                window.addEventListener('scroll', () => {
                    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    if (scrollTop > lastScrollTop) {
                        cursor.classList.add('scrolling-down');
                        cursor.classList.remove('scrolling-up');
                    } else {
                        cursor.classList.add('scrolling-up');
                        cursor.classList.remove('scrolling-down');
                    }
                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
                    setTimeout(() => {
                        cursor.classList.remove('scrolling-up', 'scrolling-down');
                    }, 300);
                });
            }

            // Preloader
            window.addEventListener('load', function () {
                setTimeout(function () {
                    document.getElementById('preloader').style.display = 'none';
                }, 2000);
            });

            // Theme Toggle
            const themeSwitch = document.getElementById("theme-switch");
            themeSwitch.addEventListener("change", function () {
                document.body.classList.toggle("dark-mode");
                document.body.classList.toggle("light-mode");
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });

            // Load saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.classList.add(savedTheme === 'dark' ? 'dark-mode' : 'light-mode');
                themeSwitch.checked = savedTheme === 'dark';
            }

            // Enhanced Sidebar Toggle
            const toggleBtn = document.querySelector('.toggle-btn');
            const sidebar = document.querySelector('.sidebar');
            const sidebarCloseBtn = document.querySelector('.sidebar-close-btn');
            const sidebarOverlay = document.querySelector('.sidebar-overlay');
            
            function toggleSidebar() {
                sidebar.classList.toggle('show');
                sidebarOverlay.classList.toggle('active');
                
                // Disable scroll when sidebar is open
                if (sidebar.classList.contains('show')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            }
            
            toggleBtn.addEventListener('click', toggleSidebar);
            sidebarCloseBtn.addEventListener('click', toggleSidebar);
            sidebarOverlay.addEventListener('click', toggleSidebar);
            
            // Close sidebar when clicking on a link
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        toggleSidebar();
                    }
                });
            });

            // Login Button
            document.getElementById('loginButton').addEventListener('click', function () {
                window.location.href = 'login.html';
            });

// Welcome Message
if (localStorage.getItem('isLoggedIn') === 'true') {
    const firstName = localStorage.getItem('userFirstName');
    const lastName = localStorage.getItem('userLastName');
    document.getElementById('userName').textContent = `${firstName} ${lastName}`;
    document.getElementById('welcomeMessage').style.display = 'inline-block';
    document.getElementById('loginButton').style.display = 'none';
    document.getElementById('loginButtonMobile').style.display = 'none';
} else {
    document.getElementById('loginButton').style.display = 'inline-block';
    document.getElementById('loginButtonMobile').style.display = 'inline-block';
}



            // Background Image Slideshow
            const images = ['3.jpg', '1.png', '9.jpg', '10.jpg', '11.jpg', '12.jpg', '13.jpg', '14.jpg', '15.jpg'];
            const mainImageDiv = document.querySelector('.main-image');
            const newsSection = document.querySelector('.church-news-section');
            let currentImageIndex = 0;
            
            function updateBackground() {
                const fadeEffect = [
                    { opacity: 1 },
                    { opacity: 0.3 },
                    { opacity: 1 }
                ];
                
                const fadeOptions = {
                    duration: 1000,
                    fill: 'forwards'
                };
                
                mainImageDiv.animate(fadeEffect, fadeOptions);
                newsSection.animate(fadeEffect, fadeOptions);
                
                setTimeout(() => {
                    mainImageDiv.style.backgroundImage = `url('${images[currentImageIndex]}')`;
                    newsSection.style.backgroundImage = `url('${images[currentImageIndex]}')`;
                }, 500);
            }
            
            updateBackground();
            const slideInterval = setInterval(() => {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                updateBackground();
            }, 5000);

            // Scroll Behavior for All Devices
            // Scroll Behavior for All Devices
let lastScrollTop = 0;
const topBar = document.getElementById('topBar');
const mainImage = document.querySelector('.main-image');
const mainImageHeight = mainImage.offsetHeight;

function handleScrollEvent() {
    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    // Check if we're on mobile
    if (window.innerWidth <= 768) {
        // Mobile behavior
        if (scrollTop <= mainImageHeight) {
            // When in main image area
            topBar.classList.add('transparent');
            topBar.classList.remove('scrolled', 'hidden');
        } else {
            // After main image
            topBar.classList.remove('transparent');
            topBar.classList.add('scrolled');
            
            if (scrollTop > lastScrollTop) {
                // Scrolling down
                topBar.classList.add('hidden');
            } else {
                // Scrolling up
                topBar.classList.remove('hidden');
            }
        }
    } else {
        // Desktop behavior
        if (scrollTop > mainImageHeight) {
            topBar.classList.add('scrolled');
            
            if (scrollTop > lastScrollTop && scrollTop > mainImageHeight + 100) {
                // Scrolling down after main image
                topBar.classList.add('hidden');
            } else {
                // Scrolling up
                topBar.classList.remove('hidden');
            }
        } else {
            // At top of page
            topBar.classList.remove('scrolled', 'hidden');
        }
    }
    
    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
}

            // Use throttling for better performance
            let scrollTimeout;
            window.addEventListener('scroll', function() {
                if (!scrollTimeout) {
                    scrollTimeout = setTimeout(function() {
                        handleScrollEvent();
                        scrollTimeout = null;
                    }, 20);
                }
            });

            // Initialize mobile header structure
function initMobileHeader() {
    if (window.innerWidth <= 768) {
        const topBarContent = document.querySelector('.top-bar-content');
        const siteName = document.querySelector('.site-name');
        const welcomeMessage = document.querySelector('.welcome-message');
        const themeSwitch = document.querySelector('.theme-switch-wrapper');
        const toggleBtn = document.querySelector('.toggle-btn');
        const socialMedia = document.querySelector('.social-media');
        const loginButtonDesktop = document.getElementById('loginButton');
        const loginButtonMobile = document.getElementById('loginButtonMobile');
        
        // إظهار زر الموبايل وإخفاء زر الكمبيوتر
        if (loginButtonMobile && loginButtonDesktop) {
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                loginButtonMobile.style.display = 'inline-block';
            }
            loginButtonDesktop.style.display = 'none';
        }
        
        // إنشاء mobile header
        if (!document.querySelector('.mobile-header')) {
            const mobileHeader = document.createElement('div');
            mobileHeader.className = 'mobile-header';
            
            const mobileControls = document.createElement('div');
            mobileControls.className = 'mobile-controls';
            
            // Clone elements
            const siteNameClone = siteName.cloneNode(true);
            
            // ترتيب العناصر
            mobileHeader.appendChild(siteNameClone);
            
            // إضافة رسالة الترحيب إذا كان المستخدم مسجل
            if (welcomeMessage && welcomeMessage.style.display !== 'none') {
                const welcomeMessageClone = welcomeMessage.cloneNode(true);
                mobileHeader.appendChild(welcomeMessageClone);
            }
            
            // إضافة زر تسجيل الدخول للموبايل إذا لم يكن مسجل
            if (loginButtonMobile && localStorage.getItem('isLoggedIn') !== 'true') {
                const loginButtonClone = loginButtonMobile.cloneNode(true);
                loginButtonClone.id = 'loginButtonMobileClone';
                loginButtonClone.style.display = 'inline-block';
                mobileHeader.appendChild(loginButtonClone);
            }
            
            // إضافة عناصر التحكم
            mobileControls.appendChild(toggleBtn.cloneNode(true));
            mobileControls.appendChild(themeSwitch.cloneNode(true));
            
            // إضافة وسائل التواصل الاجتماعي
            if (socialMedia) {
                const socialMediaClone = socialMedia.cloneNode(true);
                mobileHeader.appendChild(socialMediaClone);
            }
            
            // مسح المحتوى القديم
            topBarContent.innerHTML = '';
            
            // إضافة الهيكل الجديد
            topBarContent.appendChild(mobileHeader);
            topBarContent.appendChild(mobileControls);
            
            // إعادة إرفاق المستمعين للأحداث
            document.querySelector('.toggle-btn').addEventListener('click', toggleSidebar);
            document.querySelector('.theme-switch').addEventListener('change', function() {
                document.body.classList.toggle("dark-mode");
                document.body.classList.toggle("light-mode");
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
                    }
                }
            
        

            else {
        // إعادة تعيين للكمبيوتر
        const loginButtonDesktop = document.getElementById('loginButton');
        const loginButtonMobile = document.getElementById('loginButtonMobile');
        
        if (loginButtonDesktop && loginButtonMobile) {
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                loginButtonDesktop.style.display = 'inline-block';
            }
            loginButtonMobile.style.display = 'none';
        }
        
        // إزالة mobile header إذا كان موجوداً
        const mobileHeader = document.querySelector('.mobile-header');
        if (mobileHeader) {
            mobileHeader.remove();
        }
    }
}

            // Run on load and resize with debounce
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(initMobileHeader, 200);
            });
            
            // Initial call
            initMobileHeader();

            

            // Enhanced News Slider
            const newsSlider = document.querySelector('.news-slider');
            const newsCards = document.querySelectorAll('.news-card');
            const nextBtn = document.querySelector('.next-btn');
            const prevBtn = document.querySelector('.prev-btn');
            let currentIndex = 0;
            let autoSlideInterval = null;

            function updateSlider() {
                newsCards.forEach((card, index) => {
                    card.classList.remove('active');
                    if (index === currentIndex) {
                        card.classList.add('active');
                    }
                });
            }

            nextBtn.addEventListener('click', () => {
                stopAutoSlide();
                if (currentIndex < newsCards.length - 1) {
                    currentIndex++;
                } else {
                    currentIndex = 0;
                }
                updateSlider();
                startAutoSlide();
            });

            prevBtn.addEventListener('click', () => {
                stopAutoSlide();
                if (currentIndex > 0) {
                    currentIndex--;
                } else {
                    currentIndex = newsCards.length - 1;
                }
                updateSlider();
                startAutoSlide();
            });

            function startAutoSlide() {
                if (window.innerWidth <= 768 && !autoSlideInterval) {
                    autoSlideInterval = setInterval(() => {
                        if (currentIndex < newsCards.length - 1) {
                            currentIndex++;
                        } else {
                            currentIndex = 0;
                        }
                        updateSlider();
                    }, 5000);
                }
            }

            function stopAutoSlide() {
                if (autoSlideInterval) {
                    clearInterval(autoSlideInterval);
                    autoSlideInterval = null;
                }
            }

            // Initialize slider
            updateSlider();
            startAutoSlide();

            // Handle resize events for news slider
            window.addEventListener('resize', () => {
                stopAutoSlide();
                updateSlider();
                startAutoSlide();
            });

            // Modal Functions
            window.showModal = function(title, content) {
                const modal = document.getElementById("newsModal");
                const modalTitle = document.getElementById("modalTitle");
                const modalContent = document.getElementById("modalContent");
                modalTitle.textContent = title;
                modalContent.textContent = content;
                modal.style.display = "block";
                
                // Disable scroll when modal is open
                document.body.style.overflow = 'hidden';
            };

            document.querySelector(".close-btn").onclick = function () {
                document.getElementById("newsModal").style.display = "none";
                // Re-enable scroll
                document.body.style.overflow = '';
            };

            window.onclick = function (event) {
                const modal = document.getElementById("newsModal");
                if (event.target === modal) {
                    modal.style.display = "none";
                    // Re-enable scroll
                    document.body.style.overflow = '';
                }
            };

            // Add touch swipe support for news slider on mobile
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.querySelector('.news-slider').addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            
            document.querySelector('.news-slider').addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);
            
            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    // Swipe left - next slide
                    nextBtn.click();
                }
                if (touchEndX > touchStartX + 50) {
                    // Swipe right - previous slide
                    prevBtn.click();
                }
            }

            document.addEventListener('click', function(event) {
                const sidebar = document.querySelector('.sidebar');
                const toggleBtn = document.querySelector('.toggle-btn');
                const sidebarOverlay = document.querySelector('.sidebar-overlay');
                
                if (sidebar.classList.contains('show') && 
                    !sidebar.contains(event.target) && 
                    !toggleBtn.contains(event.target)) {
                    
                    // إضافة تأثير انتقالي قبل الإغلاق
                    sidebar.style.transition = 'transform 0.4s cubic-bezier(0.77, 0, 0.175, 1)';
                    sidebarOverlay.style.transition = 'opacity 0.4s ease';
                    
                    // إغلاق الشريط
                    sidebar.classList.remove('show');
                    sidebarOverlay.classList.remove('active');
                    
                    // إعادة ضبط التمرير بعد انتهاء الانتقال
                    setTimeout(() => {
                        document.body.style.overflow = '';
                    }, 400);
                }
            });

            // Add smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // Close sidebar if open on mobile
                        if (window.innerWidth <= 768 && sidebar.classList.contains('show')) {
                            toggleSidebar();
                        }
                    }
                });
            });

            

            // Enhance images with lazy loading and progressive enhancement
            const lazyImages = document.querySelectorAll('img[loading="lazy"]');
            if ('loading' in HTMLImageElement.prototype) {
                // Browser supports native lazy loading
                lazyImages.forEach(img => {
                    img.src = img.getAttribute('src');
                });
            } else {
                // Fallback for browsers that don't support lazy loading
                const lazyLoadObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.getAttribute('src');
                            observer.unobserve(img);
                        }
                    });
                });
                
                lazyImages.forEach(img => {
                    lazyLoadObserver.observe(img);
                });
            }
        });


        // إضافة تأثير المغناطيس للأقسام
function initMagnetSections() {
    const sections = document.querySelectorAll('.section-transiti');
    const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -20% 0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const section = entry.target;
            const rect = section.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            
            if (entry.isIntersecting) {
                // حساب المسافة من الأعلى والأسفل
                const distanceFromTop = rect.top;
                const distanceFromBottom = windowHeight - rect.bottom;
                
                // إضافة تأثير المغناطيس بناءً على الاتجاه
                if (distanceFromTop < distanceFromBottom) {
                    // القسم قادم من الأعلى
                    section.classList.add('magnet-top');
                    section.classList.remove('magnet-bottom');
                } else {
                    // القسم قادم من الأسفل
                    section.classList.add('magnet-bottom');
                    section.classList.remove('magnet-top');
                }
                
                // إزالة التأثير بعد فترة
                setTimeout(() => {
                    section.classList.remove('magnet-top', 'magnet-bottom');
                }, 300);
            }
        });
    }, observerOptions);

    sections.forEach(section => {
        observer.observe(section);
    });

    // إضافة تأثير المغناطيس عند التمرير بالماوس
    let isScrolling = false;
    window.addEventListener('scroll', () => {
        if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(() => {
                sections.forEach(section => {
                    if (section.getBoundingClientRect().top < window.innerHeight * 0.8 && 
                        section.getBoundingClientRect().bottom > window.innerHeight * 0.2) {
                        
                        const scrollDirection = window.scrollY > (window.lastScrollY || 0) ? 'down' : 'up';
                        
                        if (scrollDirection === 'down') {
                            section.classList.add('magnet-bottom');
                            section.classList.remove('magnet-top');
                        } else {
                            section.classList.add('magnet-top');
                            section.classList.remove('magnet-bottom');
                        }
                        
                        setTimeout(() => {
                            section.classList.remove('magnet-top', 'magnet-bottom');
                        }, 200);
                    }
                });
                
                window.lastScrollY = window.scrollY;
                isScrolling = false;
            });
        }
    });

    // إصلاح مشكلة الجيرسكوب في الموبايل
    if (window.innerWidth <= 768) {
        // إزالة بيانات الجيرسكوب في الموبايل
        document.querySelectorAll('[data-tilt]').forEach(el => {
            el.removeAttribute('data-tilt');
            el.removeAttribute('data-tilt-max');
            el.removeAttribute('data-tilt-speed');
            el.removeAttribute('data-tilt-perspective');
        });
        
        // تعطيل VanillaTilt في الموبايل
        if (typeof VanillaTilt !== 'undefined') {
            VanillaTilt.init = function() {};
        }
    }
}

// استدعاء الدالة بعد تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
    // ... الكود الحالي ...
    
    // إضافة تأثير المغناطيس بعد تحميل الصفحة
    setTimeout(initMagnetSections, 1000);
    
    // تحديث عند تغيير حجم النافذة
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
            initMagnetSections();
        }, 250);
    });
});

// تحسين الأداء للجيرسكوب
if (window.innerWidth > 768) {
    // تهيئة VanillaTilt بإعدادات محسنة
    VanillaTilt.init(document.querySelector('.about-content'), {
        max: 5, // تقليل الدرجة
        speed: 300,
        perspective: 1000,
        glare: true,
        "max-glare": 0.2,
        scale: 1.02,
        gyroscope: false // تعطيل الجيرسكوب
    });


    

    
    VanillaTilt.init(document.querySelectorAll('.news-card'), {
        max: 5,
        speed: 300,
        perspective: 1000,
        glare: true,
        "max-glare": 0.15,
        scale: 1.03,
        gyroscope: false
    });
}

        
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93a9db35bf691379',t:'MTc0NjM4MTE5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93b703ad1a7353cf',t:'MTc0NjUxOTE2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>